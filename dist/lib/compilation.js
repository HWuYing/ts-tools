"use strict";Object.defineProperty(exports, "__esModule", { value: true });exports.format = format;exports.createCompilationPromise = createCompilationPromise;

function format(time) {
  return time.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/, '$1');
}


function createCompilationPromise(name, compiler, config) {
  return new Promise((resolve, reject) => {
    let timeStart = new Date();
    compiler.hooks.compile.tap(name, () => {
      timeStart = new Date();
      console.info(`[${format(timeStart)}] Compiling '${name}'...`);
    });

    compiler.hooks.done.tap(name, stats => {
      console.info(stats.toString(config.stats));
      const timeEnd = new Date();
      const time = timeEnd.getTime() - timeStart.getTime();
      if (stats.hasErrors()) {
        console.info(
        `[${format(timeEnd)}] Failed to compile '${name}' after ${time} ms`);

        reject(new Error('Compilation failed!'));
      } else {
        console.info(
        `[${format(
        timeEnd)
        }] Finished '${name}' compilation after ${time} ms`);

        resolve(stats);
      }
    });
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3Rvb2xzL2xpYi9jb21waWxhdGlvbi50cyJdLCJuYW1lcyI6WyJmb3JtYXQiLCJ0aW1lIiwidG9UaW1lU3RyaW5nIiwicmVwbGFjZSIsImNyZWF0ZUNvbXBpbGF0aW9uUHJvbWlzZSIsIm5hbWUiLCJjb21waWxlciIsImNvbmZpZyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwidGltZVN0YXJ0IiwiRGF0ZSIsImhvb2tzIiwiY29tcGlsZSIsInRhcCIsImNvbnNvbGUiLCJpbmZvIiwiZG9uZSIsInN0YXRzIiwidG9TdHJpbmciLCJ0aW1lRW5kIiwiZ2V0VGltZSIsImhhc0Vycm9ycyIsIkVycm9yIl0sIm1hcHBpbmdzIjoiOztBQUVPLFNBQVNBLE1BQVQsQ0FBZ0JDLElBQWhCLEVBQTJCO0FBQ2hDLFNBQU9BLElBQUksQ0FBQ0MsWUFBTCxHQUFvQkMsT0FBcEIsQ0FBNEIseUJBQTVCLEVBQXVELElBQXZELENBQVA7QUFDRDs7O0FBR00sU0FBU0Msd0JBQVQsQ0FBa0NDLElBQWxDLEVBQWdEQyxRQUFoRCxFQUErREMsTUFBL0QsRUFBc0Y7QUFDM0YsU0FBTyxJQUFJQyxPQUFKLENBQVksQ0FBQ0MsT0FBRCxFQUFVQyxNQUFWLEtBQXFCO0FBQ3RDLFFBQUlDLFNBQVMsR0FBRyxJQUFJQyxJQUFKLEVBQWhCO0FBQ0FOLElBQUFBLFFBQVEsQ0FBQ08sS0FBVCxDQUFlQyxPQUFmLENBQXVCQyxHQUF2QixDQUEyQlYsSUFBM0IsRUFBaUMsTUFBTTtBQUNyQ00sTUFBQUEsU0FBUyxHQUFHLElBQUlDLElBQUosRUFBWjtBQUNBSSxNQUFBQSxPQUFPLENBQUNDLElBQVIsQ0FBYyxJQUFHakIsTUFBTSxDQUFDVyxTQUFELENBQVksZ0JBQWVOLElBQUssTUFBdkQ7QUFDRCxLQUhEOztBQUtBQyxJQUFBQSxRQUFRLENBQUNPLEtBQVQsQ0FBZUssSUFBZixDQUFvQkgsR0FBcEIsQ0FBd0JWLElBQXhCLEVBQStCYyxLQUFELElBQWdCO0FBQzVDSCxNQUFBQSxPQUFPLENBQUNDLElBQVIsQ0FBYUUsS0FBSyxDQUFDQyxRQUFOLENBQWViLE1BQU0sQ0FBQ1ksS0FBdEIsQ0FBYjtBQUNBLFlBQU1FLE9BQU8sR0FBRyxJQUFJVCxJQUFKLEVBQWhCO0FBQ0EsWUFBTVgsSUFBSSxHQUFHb0IsT0FBTyxDQUFDQyxPQUFSLEtBQW9CWCxTQUFTLENBQUNXLE9BQVYsRUFBakM7QUFDQSxVQUFJSCxLQUFLLENBQUNJLFNBQU4sRUFBSixFQUF1QjtBQUNyQlAsUUFBQUEsT0FBTyxDQUFDQyxJQUFSO0FBQ0csWUFBR2pCLE1BQU0sQ0FBQ3FCLE9BQUQsQ0FBVSx3QkFBdUJoQixJQUFLLFdBQVVKLElBQUssS0FEakU7O0FBR0FTLFFBQUFBLE1BQU0sQ0FBQyxJQUFJYyxLQUFKLENBQVUscUJBQVYsQ0FBRCxDQUFOO0FBQ0QsT0FMRCxNQUtPO0FBQ0xSLFFBQUFBLE9BQU8sQ0FBQ0MsSUFBUjtBQUNHLFlBQUdqQixNQUFNO0FBQ1JxQixRQUFBQSxPQURRO0FBRVIsdUJBQWNoQixJQUFLLHVCQUFzQkosSUFBSyxLQUhsRDs7QUFLQVEsUUFBQUEsT0FBTyxDQUFDVSxLQUFELENBQVA7QUFDRDtBQUNGLEtBakJEO0FBa0JELEdBekJNLENBQVA7QUEwQkQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb25maWd1cmF0aW9uIH0gZnJvbSAnd2VicGFjayc7XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXQodGltZTogYW55KSB7XG4gIHJldHVybiB0aW1lLnRvVGltZVN0cmluZygpLnJlcGxhY2UoLy4qKFxcZHsyfTpcXGR7Mn06XFxkezJ9KS4qLywgJyQxJyk7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNvbXBpbGF0aW9uUHJvbWlzZShuYW1lOiBzdHJpbmcsIGNvbXBpbGVyOiBhbnksIGNvbmZpZzogQ29uZmlndXJhdGlvbikge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGxldCB0aW1lU3RhcnQgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbXBpbGVyLmhvb2tzLmNvbXBpbGUudGFwKG5hbWUsICgpID0+IHtcbiAgICAgIHRpbWVTdGFydCA9IG5ldyBEYXRlKCk7XG4gICAgICBjb25zb2xlLmluZm8oYFske2Zvcm1hdCh0aW1lU3RhcnQpfV0gQ29tcGlsaW5nICcke25hbWV9Jy4uLmApO1xuICAgIH0pO1xuXG4gICAgY29tcGlsZXIuaG9va3MuZG9uZS50YXAobmFtZSwgKHN0YXRzOiBhbnkpID0+IHtcbiAgICAgIGNvbnNvbGUuaW5mbyhzdGF0cy50b1N0cmluZyhjb25maWcuc3RhdHMpKTtcbiAgICAgIGNvbnN0IHRpbWVFbmQgPSBuZXcgRGF0ZSgpO1xuICAgICAgY29uc3QgdGltZSA9IHRpbWVFbmQuZ2V0VGltZSgpIC0gdGltZVN0YXJ0LmdldFRpbWUoKTtcbiAgICAgIGlmIChzdGF0cy5oYXNFcnJvcnMoKSkge1xuICAgICAgICBjb25zb2xlLmluZm8oXG4gICAgICAgICAgYFske2Zvcm1hdCh0aW1lRW5kKX1dIEZhaWxlZCB0byBjb21waWxlICcke25hbWV9JyBhZnRlciAke3RpbWV9IG1zYCxcbiAgICAgICAgKTtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignQ29tcGlsYXRpb24gZmFpbGVkIScpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuaW5mbyhcbiAgICAgICAgICBgWyR7Zm9ybWF0KFxuICAgICAgICAgICAgdGltZUVuZCxcbiAgICAgICAgICApfV0gRmluaXNoZWQgJyR7bmFtZX0nIGNvbXBpbGF0aW9uIGFmdGVyICR7dGltZX0gbXNgLFxuICAgICAgICApO1xuICAgICAgICByZXNvbHZlKHN0YXRzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG4iXX0=